<!DOCTYPE html>
<html lang="es">
{% load static %}
{% include 'plantillas/dame_head.html' %}
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agregar productos</title>
  <link rel="stylesheet" href="{% static 'css/registro.css' %}">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
  <style>
body {
  margin: 0;
  padding: 0;
  background-image: url("{% static 'IMG/placeholder.jpg' %}");
  background-size: cover;
  background-position: center;
  background-attachment: fixed; /* ðŸ”¹ Esto hace que el fondo permanezca fijo */
  position: relative;
}

/* ðŸ”¹ Capa de oscurecimiento */
body::before {
  content: '';
  position: fixed; /* ðŸ”¹ Cambiado de absolute a fixed */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.55);
  z-index: 1;
  pointer-events: none;
}

/* ðŸ”¹ Capa de desenfoque */
body::after {
  content: '';
  position: fixed; /* ðŸ”¹ TambiÃ©n fixed */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  backdrop-filter: blur(5px);
  z-index: 2;
  pointer-events: none;
}

/* ðŸ”¹ Contenedor del formulario */
.form-container {
  position: relative;
  z-index: 3;
  width: 95%;
  max-width: 700px;
  margin: 80px auto 40px auto;
  padding: 25px;
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
}

    h5 {
      text-align: center;
      margin-bottom: 20px;
      font-weight: bold;
      color: #333;
    }

    .image-row {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }
    .image-row .small-form-group {
      flex: 1;
    }

    .submit-button {
      width: 100%;
      padding: 12px;
      margin-top: 12px;
      border: none;
      border-radius: 8px;
      background: #4a90e2;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .submit-button:hover {
      background: #357abd;
    }

    #volverTienda { color: white; text-decoration: none; }
    #volverTienda:hover { color: black; }

    .alert {
      margin-top: 16px;
      font-size: 0.95rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .form-container { padding: 16px; margin-top: 60px; }
      .image-row { flex-direction: column; gap: 12px; }
    }
  </style>
</head>
<body>
  {% include 'plantillas/navbar.html' %}

  <div class="form-container">
    <form class="register-form" action="" method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <h5>Agregar productos</h5>

      <div class="form-group">
        <label for="nomProd">Nombre</label>
        <input type="text" id="nomProd" name="nomProd" class="form-control" required>
      </div>

      <div class="form-group">
        <label for="descripcionProducto">DescripciÃ³n</label>
        <textarea id="descripcionProducto" name="descripcionProducto" class="form-control" required></textarea>
      </div>

      <div class="form-group">
        <label for="precioProducto">Precio</label>
        <input type="number" id="precioProducto" name="precioProducto" class="form-control" required>
      </div>

      <div class="form-group">
        <label for="stockProducto">Stock</label>
        <input type="number" id="stockProducto" name="stockProducto" class="form-control" required>
      </div>

      <!-- Tipo de Producto -->
      <div class="form-group">
        <label for="tipo_producto">Tipo de producto</label>
        <select name="tipo_producto" id="tipo_producto" class="form-control" required onchange="toggleFields()">
          <option value="">Seleccionar</option>
          {% for m in tipo_producto %}
          <option value="{{ m.nombre_tipo }}">{{ m.nombre_tipo }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Campos adicionales -->
      <div class="form-group">
        <label for="marca">Marca</label>
        <input type="text" id="marca" name="marca" class="form-control">
      </div>

      <div class="form-group">
        <label for="socket">Socket</label>
        <input type="text" id="socket" name="socket" class="form-control">
      </div>

      <!-- Tarjetas de Video -->
      <div id="video_fields" style="display:none;">
        <div class="form-group">
          <label for="memoria_video">Memoria de Video</label>
          <input type="text" id="memoria_video" name="memoria_video" class="form-control" value="0">
        </div>
        <div class="form-group">
          <label for="tipo_memoria">Tipo de Memoria</label>
          <input type="text" id="tipo_memoria" name="tipo_memoria" class="form-control" value="Tipo de memoria">
        </div>
      </div>

      <!-- Procesadores -->
      <div id="procesador_fields" style="display:none;">
        <div class="form-group">
          <label for="frecuencia_base">Frecuencia Base</label>
          <input type="text" id="frecuencia_base" name="frecuencia_base" class="form-control" value="0">
        </div>
        <div class="form-group">
          <label for="frecuencia_boost">Frecuencia Boost</label>
          <input type="text" id="frecuencia_boost" name="frecuencia_boost" class="form-control" value="0">
        </div>
        <div class="form-group">
          <label for="nucleos">NÃºcleos</label>
          <input type="number" id="nucleos" name="nucleos" class="form-control" value="0">
        </div>
        <div class="form-group">
          <label for="hilos">Hilos</label>
          <input type="number" id="hilos" name="hilos" class="form-control" value="0">
        </div>
      </div>

      <!-- ImÃ¡genes -->
      <div class="image-row">
        <div class="form-group small-form-group">
          <label for="imagenUno">Foto Producto</label>
          <input type="file" name="imagenUno" id="imagenUno" class="form-control-file" required>
          {% if producto.imagen_uno %}
          <img src="{{ producto.imagen_uno.url }}" alt="Imagen Uno" class="img-fluid mt-2 rounded">
          {% endif %}
        </div>
        <div class="form-group small-form-group">
          <label for="imagenDos">Foto Producto 2</label>
          <input type="file" name="imagenDos" id="imagenDos" class="form-control-file">
          {% if producto.imagen_dos %}
          <img src="{{ producto.imagen_dos.url }}" alt="Imagen Dos" class="img-fluid mt-2 rounded">
          {% endif %}
        </div>
      </div>

      <div class="image-row">
        <div class="form-group small-form-group">
          <label for="imagenTres">Foto Producto 3</label>
          <input type="file" name="imagenTres" id="imagenTres" class="form-control-file">
          {% if producto.imagen_tres %}
          <img src="{{ producto.imagen_tres.url }}" alt="Imagen Tres" class="img-fluid mt-2 rounded">
          {% endif %}
        </div>
        <div class="form-group small-form-group">
          <label for="imagenCuatro">Foto Producto 4</label>
          <input type="file" name="imagenCuatro" id="imagenCuatro" class="form-control-file">
          {% if producto.imagen_cuatro %}
          <img src="{{ producto.imagen_cuatro.url }}" alt="Imagen Cuatro" class="img-fluid mt-2 rounded">
          {% endif %}
        </div>
      </div>

      <button type="submit" class="submit-button">Agregar producto</button>
      <a href="{% url 'tienda' %}" class="submit-button text-center d-block" id="volverTienda">Volver a la tienda</a>

      {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="close" data-dismiss="alert">&times;</button>
        </div>
        {% endfor %}
      {% endif %}
    </form>
  </div>

  <script>
    function toggleFields() {
      const tipoProducto = document.getElementById("tipo_producto").value;
      document.getElementById("video_fields").style.display = tipoProducto === "Graficas" ? "block" : "none";
      document.getElementById("procesador_fields").style.display = tipoProducto === "Procesador" ? "block" : "none";
    }
    document.addEventListener("DOMContentLoaded", toggleFields);
  </script>
</body>
</html>
